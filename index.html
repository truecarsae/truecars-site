<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>True Cars Only</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;}
    html{scroll-behavior:smooth;}
    body{background-color:#3a3a3a;color:#fff;line-height:1.6;overflow-x:hidden;}
    a{text-decoration:none;color:inherit;}

    :root{
      --header-bg:#1e1e1e;
      --header-height:90px;
      --header-height-scrolled:60px;
      --bg-shift:0px; /* для параллакса */
    }

    /* ===== Header ===== */
    header{
      position:fixed;top:0;left:0;width:100%;
      height:var(--header-height);
      background:var(--header-bg);
      display:flex;justify-content:center;align-items:center;
      transition:height .35s ease,box-shadow .35s ease;
      z-index:1000;
      box-shadow:0 2px 8px rgba(0,0,0,0.4);
      cursor:pointer; /* клик — наверх */
      -webkit-tap-highlight-color: transparent;
    }
    header.scrolled{height:var(--header-height-scrolled);}
    #main-logo{
      height:100%; width:auto; padding:0; /* логотип ровно по высоте полосы */
      transition:filter .35s ease;
      display:block;
      -webkit-user-drag:none;
    }
    header.scrolled #main-logo{filter:drop-shadow(0 0 4px rgba(0,0,0,.2));}
    #header-spacer{height:var(--header-height);transition:height .35s ease;}

    /* ===== Hero (динамический параллакс) ===== */
    .hero{
      position:relative;min-height:60vh;overflow:hidden;
      display:flex;flex-direction:column;justify-content:flex-end;align-items:center;
      text-align:center;padding:40px 20px 50px;
      background:linear-gradient(to bottom,rgba(0,0,0,0.55),#3a3a3a 75%);
    }
    .hero::before{
      content:"";position:absolute;top:0;left:0;width:100%;height:120%;
      background:url("https://github.com/truecarsae/truecars-site/blob/truecarsae-images/dubai-skyline.png?raw=true") center/cover no-repeat;
      transform:translateY(var(--bg-shift));
      will-change:transform;
      z-index:-1;
    }

    .hero h1{font-size:3rem;font-weight:300;letter-spacing:2px;margin-bottom:12px;}
    .hero h2{font-size:1.8rem;margin-bottom:12px;}
    .hero p{font-size:1.2rem;margin-bottom:25px;color:#ddd;}
    .cta{
      display:flex;gap:20px;flex-wrap:wrap;
      justify-content:center;align-items:center;text-align:center;
      margin-top:10px;
    }
    .cta a{background:#fff;color:#1c1c1c;padding:15px 25px;border-radius:5px;font-weight:600;transition:0.3s;}
    .cta a:hover{background:#ffcc00;color:#818181;}

    /* ===== Cars ===== */
    .cars{padding:60px 20px;max-width:1200px;margin:0 auto;}
    .cars h2{text-align:center;font-size:2.5rem;margin-bottom:40px;}
    .car-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;}
    .car-card{background:#2a2a2a;border-radius:10px;padding:20px;text-align:center;transition:0.3s;cursor:pointer;}
    .car-card:hover{background:#333;transform:translateY(-5px);}
    .car-card img{max-width:100%;border-radius:10px;margin-bottom:15px;object-fit:cover;aspect-ratio:16/9;}
    .car-card h3{font-size:1.5rem;margin-bottom:10px;}
    .car-card p{font-size:1rem;color:#ccc;}

    /* ===== Footer ===== */
    footer{text-align:center;padding:40px 20px;background:#111;color:#aaa;margin-top:40px;}
    footer .contacts{
      display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:20px;flex-wrap:wrap;text-align:center;
    }
    footer .contacts a{font-weight:500;background:#222;padding:10px 15px;border-radius:6px;transition:.3s;}
    footer .contacts a:hover{background:#ffcc00;color:#000;}

    /* ===== Modal ===== */
    .modal{display:none;position:fixed;z-index:2000;inset:0;padding-top:60px;overflow:auto;
      background-color:rgba(0,0,0,0.8);animation:fadeIn 0.4s ease;}
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
    .modal-content{background-color:#2a2a2a;margin:auto;padding:20px;border-radius:12px;width:90%;max-width:700px;position:relative;
      text-align:center;box-shadow:0 0 25px rgba(0,0,0,0.4);transform:scale(0.95);opacity:0;animation:modalAppear 0.4s forwards;}
    @keyframes modalAppear{to{transform:scale(1);opacity:1;}}
    .close{
      color:#fff;position:absolute;top:10px;right:20px;font-size:28px;cursor:pointer;transition:0.2s;
      z-index:3001; -webkit-tap-highlight-color: transparent;
    }
    .close:hover{color:#ffcc00;}
    .carousel{position:relative;}
    .carousel img{width:100%;border-radius:8px;margin-bottom:10px;opacity:0;transition:opacity 0.4s ease;}
    .carousel img.loaded{opacity:1;}
    .loader{
      display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
      z-index:2990; pointer-events:none; /* не блокируем крестик/стрелки */
    }
    .dot{display:inline-block;width:10px;height:10px;margin:0 3px;background:#ffcc00;border-radius:50%;animation:bounce 1s infinite ease-in-out;}
    .dot:nth-child(2){animation-delay:0.2s;} .dot:nth-child(3){animation-delay:0.4s;}
    @keyframes bounce{0%,80%,100%{transform:scale(0);}40%{transform:scale(1);}}

    /* ===== Arrows (без кружков, масштаб при ховере/тапе) ===== */
    .prev, .next {
      cursor: pointer;
      position: absolute;
      top: 50%;
      transform: translateY(-50%) scale(1);
      font-size: 42px;
      color: white;
      background: none;
      border: none;
      opacity: 0.8;
      transition: transform 0.2s ease, opacity 0.2s ease;
      z-index: 3000;
      user-select: none;
      outline: none;
      -webkit-appearance: none; appearance: none;
      -webkit-tap-highlight-color: transparent; /* убираем серый круг на iOS */
      border-radius: 0; box-shadow:none;
    }
    .prev:hover, .next:hover,
    .prev:active, .next:active {
      opacity: 1;
      transform: translateY(-50%) scale(1.3);
    }
    .prev { left: 15px; }
    .next { right: 15px; }

    .rental-form{text-align:center;margin-top:15px;}
    .rental-form label{display:block;margin-bottom:8px;font-weight:500;font-size:1.2rem;}
    .date-options{display:flex;justify-content:center;align-items:center;gap:8px;margin-bottom:15px;flex-wrap:wrap;}
    #startDate,#endDate{padding:8px;border-radius:5px;border:none;outline:none;}
    #monthlyBtn{
      padding:8px 15px;border-radius:5px;border:none;cursor:pointer;background:#ffcc00;font-weight:bold;transition:0.3s;
      -webkit-appearance:none;appearance:none;-webkit-tap-highlight-color:transparent;
    }
    #monthlyBtn:hover{background:#ffe680;}
    .contact-links{display:flex;justify-content:center;gap:20px;flex-wrap:wrap;}
    .contact-links a{background:#fff;color:#000;padding:10px 20px;border-radius:6px;font-weight:600;transition:0.3s;}
    .contact-links a:hover{background:#ffcc00;color:#222;}
  </style>
</head>
<body>

  <!-- Header -->
  <header id="top-header">
    <img id="main-logo" src="https://github.com/truecarsae/truecars-site/blob/truecarsae-images/Truecars.ae.png?raw=true" alt="Truecars Logo">
  </header>
  <!-- Spacer: контент строго под полосой хедера -->
  <div id="header-spacer"></div>

  <!-- Hero -->
  <section class="hero">
    <h1>TRUE CARS ONLY</h1>
    <h2>Low mileage. High trims. Best experience.</h2>
    <p>We are honest car rental in Dubai without deposit</p>
    <h2>DELIVERY - FREE!</h2>
    <p>All around Dubai including airports</p>
    <div class="cta">
      <a href="https://wa.me/971506402718" target="_blank">WhatsApp</a>
      <a href="https://t.me/+971506402718" target="_blank">Telegram</a>
      <a href="https://instagram.com/truecars.ae" target="_blank">Instagram</a>
    </div>
  </section>

  <!-- Cars -->
  <section class="cars">
    <h2>Our Cars</h2>
    <div class="car-grid">
      <div class="car-card">
        <img loading="lazy" src="https://dhihk6wcjzylk.cloudfront.net/carprices/media/catalog/689b185e8aaa1Hyundai_Sonata_Front.webp" alt="Hyundai Sonata 2024">
        <h3>Hyundai Sonata 2024</h3>
        <p>220 AED / day | 4,300 AED / month</p>
      </div>
      <div class="car-card">
        <img loading="lazy" src="https://www.hyundai.com/content/dam/hyundai/wallan/en/data/vehicle-thumbnail/product/azera-2024/small/azera-gn7-3.png" alt="Hyundai Azera 2024">
        <h3>Hyundai Azera 2024</h3>
        <p>310 AED / day | 6,200 AED / month</p>
      </div>
      <div class="car-card">
        <img loading="lazy" src="https://images.dealer.com/ddc/vehicles/2025/Kia/K5/Sedan/perspective/front-left/2025_20.png" alt="Kia K5 2024">
        <h3>Kia K5 2024</h3>
        <p>200 AED / day | 4,100 AED / month</p>
      </div>
      <div class="car-card">
        <img loading="lazy" src="https://cdn.cetas.com.tr/Delivery/Public/Image/-1x-1/308_an2n9mye3c_aids7ir3p2.png" alt="Peugeot 308 2023">
        <h3>Peugeot 308 2023</h3>
        <p>170 AED / day | 2,700 AED / month</p>
      </div>
      <div class="car-card">
        <img loading="lazy" src="https://www.airportchevy.com/blogs/3573/wp-content/uploads/2023/11/2024-chevy-trax.png" alt="Chevrolet Trax 2023">
        <h3>Chevrolet Trax 2023</h3>
        <p>170 AED / day | 2'700 AED / month</p>
      </div>
      <div class="car-card">
        <img loading="lazy" src="https://media.dealeralchemist.com/jellies/Hyundai/Palisade/C475975_WC9_Front.png?auto=compress%2Cformat" alt="Hyundai Palisade 2025">
        <h3>Hyundai Palisade 2025</h3>
        <p>700 AED / day | 12'000 AED / month</p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="contacts">
      <a href="https://wa.me/971506402718" target="_blank">WhatsApp</a>
      <a href="https://t.me/+971506402718" target="_blank">Telegram</a>
      <a href="https://instagram.com/truecars.ae" target="_blank">Instagram</a>
    </div>
    <p>&copy; 2025 Truecars.ae - All rights reserved.</p>
    <p>TRUECARS MIDDLE EAST CAR RENTAL L.L.C.</p>
  </footer>

  <!-- Modal -->
  <div id="carModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class="carousel">
        <button class="prev" aria-label="Previous">&#10094;</button>
        <img id="modalImage" src="" alt="Car image">
        <div class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        <button class="next" aria-label="Next">&#10095;</button>
      </div>
      <h2 id="carTitle"></h2>
      <div class="rental-form">
        <label>Выберите срок аренды:</label>
        <div class="date-options">
          <input type="date" id="startDate"> —
          <input type="date" id="endDate">
          <button id="monthlyBtn">Помесячно</button>
        </div>
        <div class="contact-links">
          <a id="whatsappLink" target="_blank">WhatsApp</a>
          <a id="telegramLink" target="_blank">Telegram</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ===== Header: уменьшение и клик-наверх ===== */
    const header = document.getElementById('top-header');
    const spacer = document.getElementById('header-spacer');
    header.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    function syncSpacer(){ spacer.style.height = header.offsetHeight + 'px'; }
    function onScroll(){
      const scrolled = window.scrollY > 60;
      header.classList.toggle('scrolled', scrolled);
      syncSpacer();
      // Параллакс: чем больше прокрутка, тем сильнее смещение фона вверх
      const y = Math.min(window.scrollY * 0.35, 250); // ограничим смещение
      document.documentElement.style.setProperty('--bg-shift', `-${y}px`);
    }
    window.addEventListener('scroll', onScroll);
    window.addEventListener('resize', syncSpacer);
    window.addEventListener('load', () => { syncSpacer(); onScroll(); });

    /* ===== Вспомогательное: HEAD с таймаутом ===== */
    function headWithTimeout(url, timeoutMs=3000){
      const controller = new AbortController();
      const t = setTimeout(()=>controller.abort(), timeoutMs);
      return fetch(url, {method:'HEAD', signal: controller.signal})
        .then(r => { clearTimeout(t); return r; })
        .catch(() => { clearTimeout(t); return { ok:false }; });
    }

    /* ===== Modal & Gallery ===== */
    const modal = document.getElementById("carModal"),
          modalImg = document.getElementById("modalImage"),
          carTitle = document.getElementById("carTitle"),
          closeBtn = document.querySelector(".close"),
          prevBtn = document.querySelector(".prev"),
          nextBtn = document.querySelector(".next"),
          loader = document.querySelector(".loader"),
          startDateInput = document.getElementById("startDate"),
          endDateInput = document.getElementById("endDate"),
          monthlyBtn = document.getElementById("monthlyBtn"),
          whatsappLink = document.getElementById("whatsappLink"),
          telegramLink = document.getElementById("telegramLink");

    let currentImages = [], currentIndex = 0, selectedCar = "";

    // Открытие модалки по клику на карточку
    document.querySelectorAll(".car-card").forEach(card=>{
      card.addEventListener("click", async (e)=>{
        e.stopPropagation(); // не даём клику "по фону" закрыть модалку
        selectedCar = card.querySelector("h3").textContent;
        carTitle.textContent = selectedCar;

        const slug = (selectedCar.toLowerCase().split(" ")[1] || "").replace(/[^a-z0-9\-]/g,'');
        const base = "https://raw.githubusercontent.com/truecarsae/truecars-site/truecarsae-images/cars/" + slug + "/";

        // Проверяем до 20 файлов HEAD-запросами (батчами по 5 для отзывчивости)
        const MAX = 10, BATCH = 3;
        let found = [];
        for (let start = 1; start <= MAX; start += BATCH){
          const batch = [];
          for (let i = start; i < start + BATCH && i <= MAX; i++){
            const url = `${base}${i}.png`;
            batch.push(headWithTimeout(url).then(res => res.ok ? url : null));
          }
          const part = await Promise.all(batch);
          found = found.concat(part.filter(Boolean));
          // небольшая пауза между батчами, чтобы не забивать сеть
          await new Promise(r=>setTimeout(r, 60));
        }
        currentImages = found;

        // Fallback: если в GitHub нет фото — берём картинку из карточки и показываем сразу (без подвисания)
        if (currentImages.length === 0) {
          const cardImg = card.querySelector("img").src;
          currentImages = [cardImg];
          currentIndex = 0;
          loader.style.display = "block";
          modalImg.classList.remove("loaded");
          modal.style.display = "block";
          // Мгновенно показываем fallback (без ожидания onload)
          modalImg.src = cardImg;
          modalImg.classList.add("loaded");
          loader.style.display = "none";
          updateLinks();
          return;
        }

        currentIndex = 0;
        showImage();
        modal.style.display = "block";
        updateLinks();
      });
    });

    function showImage(){
      loader.style.display = "block";
      modalImg.classList.remove("loaded");
      const img = new Image();
      img.src = currentImages[currentIndex];
      img.onload = () => {
        modalImg.src = img.src;
        modalImg.classList.add("loaded");
        loader.style.display = "none";
      };
    }

    prevBtn.addEventListener("click",(e)=>{ e.stopPropagation(); currentIndex=(currentIndex-1+currentImages.length)%currentImages.length; showImage(); });
    nextBtn.addEventListener("click",(e)=>{ e.stopPropagation(); currentIndex=(currentIndex+1)%currentImages.length; showImage(); });

    // Закрытие: крестик + клик по фону
    function closeModal(){ modal.style.display = "none"; }
    closeBtn.addEventListener("click",(e)=>{ e.stopPropagation(); closeModal(); });
    modal.addEventListener("click",(e)=>{ if (e.target === modal) closeModal(); });

    // Свайпы на мобильных по изображению
    let startX=0,endX=0;
    modalImg.addEventListener("touchstart",e=>{startX=e.touches[0].clientX;});
    modalImg.addEventListener("touchmove",e=>{endX=e.touches[0].clientX;});
    modalImg.addEventListener("touchend",()=>{
      if(startX-endX>50){ currentIndex=(currentIndex+1)%currentImages.length; showImage(); }
      else if(endX-startX>50){ currentIndex=(currentIndex-1+currentImages.length)%currentImages.length; showImage(); }
      startX=0; endX=0;
    });

    /* ===== Ссылки WhatsApp / Telegram ===== */
    function updateLinks(){
      const start = startDateInput.value;
      const end = endDateInput.value;
      let period = "";

      if (monthlyBtn.dataset.selected === "true") {
        period = "на помесячной основе";
      } else if (start && end) {
        period = `с ${start} по ${end}`;
      }

      const text = encodeURIComponent(`Здравствуйте! Я хочу арендовать ${selectedCar} ${period}. Подскажите, пожалуйста, доступна ли машина?`);
      // не меняем ваши ссылки
      whatsappLink.href = `https://wa.me/971506402718?text=${text}`;
      telegramLink.href = `https://t.me/+971506402718?text=${text}`;
    }

    startDateInput.addEventListener("change",updateLinks);
    endDateInput.addEventListener("change",updateLinks);
    monthlyBtn.addEventListener("click",()=>{
      monthlyBtn.dataset.selected = monthlyBtn.dataset.selected === "true" ? "false" : "true";
      monthlyBtn.style.background = monthlyBtn.dataset.selected === "true" ? "#ffe680" : "#ffcc00";
      updateLinks();
    });
  </script>
</body>
</html>
